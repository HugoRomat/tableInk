import {guid} from './../components/Helper';
import update from 'immutability-helper';
import { combineReducers } from 'redux';
import undoable, { distinctState } from 'redux-undo';
import { includeAction, excludeAction } from 'redux-undo';

const initialState = { 
    sketchLines: [],
    groupLines: [],
    stickyLines: [],
    "menuItems": [],
    "lettres": []
  };

  // function populateLetters(){
  //   var alphabet = 'abcdefghijklmnopqrstuvwxyz'.split('');
  //   alphabet.forEach((d)=>{
  //     var data = {
  //       'lettre':d,
  //       'data': [], 
  //       'id': guid()
  //     }


  //     initialState.lettres.push(data);
  //   })
  // }

  // populateLetters();

  // console.log(initialState)
//   const initialState = {
//     "sketchLines":[{"points":[[0,0],[0,0.5],[0.5,1],[1.5,2],[2.5,3.5],[4,5],[7.5,10.5],[10,14],[12.5,18.5],[15,23],[18,28],[21,33.5],[23.5,39],[25.5,44],[27.5,48.5],[29,53],[30.5,57],[31.5,60],[32.5,62.5],[33,64],[33.5,65.5],[34,66.5],[34.5,67],[35,67.5],[35.5,67],[36,66],[36,64.5],[36.5,62.5],[36.5,59.5],[37,56.5],[38,53],[38.5,49.5],[39.5,45],[40.5,41],[41.5,36.5],[42.5,32.5],[44,28],[45,24],[46,20],[47,17],[47.5,14],[47.5,11.5],[47.5,9],[47.5,7],[47,5.5],[46,4.5],[45.5,3.5],[44,3.5],[43,4],[41.5,4.5],[39.5,6],[37.5,7.5],[35.5,9.5],[33.5,12],[31,15],[28,18],[25,21.5],[22,25.5],[19.5,29.5],[17.5,33.5],[15.5,37.5],[14,41],[12.5,44.5],[11.5,47.5],[11,50],[10,52],[9.5,53.5],[9,54.5],[8,55.5],[7.5,56],[7,56],[6.5,55.5],[5.5,54.5],[4.5,53.5],[4,52],[3,50],[1.5,48.5],[0.5,46.5],[-1,44.5],[-3,42.5],[-4.5,40.5],[-6.5,39],[-8,37.5],[-10,36.5],[-11.5,35],[-13.5,34.5],[-15,34],[-16.5,33.5],[-17.5,33.5],[-18,33],[-18,32.5],[-17.5,32],[-16.5,32],[-15,31],[-13.5,30.5],[-11.5,30],[-8.5,29.5],[-5.5,29],[-1.5,29],[2,29],[6,29],[10.5,29],[15,29],[20,29],[24.5,29.5],[29,29.5],[34,30],[38.5,30.5],[42.5,31],[46,31.5],[49.5,31.5],[52.5,32],[55.5,32],[58,32],[61,32],[63,31.5],[65,31.5],[66.5,31.5],[67.5,31.5],[68,31.5],[68.5,31.5]],"data":{"class":[]},"id":"b62d0de6fffe52a271a3611e9d79b33aa","position":[500.5,523]},{"points":[[0,0],[0.5,1],[0.5,2],[0.5,3.5],[0.5,5.5],[1,8],[1,11.5],[1.5,15],[2,19.5],[2.5,24.5],[3,30],[3.5,35.5],[3.5,41.5],[4,47.5],[4,53],[4,58],[4,62.5],[3.5,66.5],[3.5,70],[3,72.5],[2.5,75],[2,77.5],[1,79],[0,80.5],[-1,81],[-2.5,81.5],[-4,81],[-5.5,80],[-7.5,78.5],[-10,76],[-12,73],[-14,70],[-16,66.5],[-17.5,63],[-18.5,60],[-19.5,57.5],[-20,55],[-20,53],[-19.5,51.5],[-18.5,50],[-17,49],[-15.5,48],[-13.5,48],[-11.5,48],[-9.5,48],[-7,48.5],[-4,49],[-1.5,49],[1.5,49.5],[4.5,49.5],[7,49],[9.5,48],[11.5,47],[14,46],[15.5,44.5],[17.5,42.5],[19,40],[21,38],[22,35.5],[23,33],[23.5,30.5],[23.5,28],[23.5,26],[23.5,24],[23.5,22],[23,21],[22.5,20],[22,19],[21.5,19],[21,19.5],[20.5,21],[19.5,23],[19,25.5],[18,28],[17,31.5],[16,35],[15,39],[13.5,43],[12,46.5],[10.5,50],[9,53],[7,56],[5,58.5],[2.5,60.5],[0.5,62.5],[-2,63.5],[-4,64.5],[-7,64.5],[-10,64.5],[-12.5,64],[-15.5,63],[-17.5,61.5],[-20,59.5],[-21.5,57],[-23.5,54],[-25,51],[-26,47.5],[-26.5,44.5],[-27,41.5],[-27,38.5],[-27,36.5],[-26.5,35],[-25.5,33.5],[-24.5,33],[-23,32.5],[-20.5,32.5],[-17.5,33],[-14.5,33.5],[-11.5,34],[-8.5,35],[-4.5,36.5],[-0.5,38],[3.5,40],[7.5,42],[11,44.5],[15,47],[19,49.5],[22.5,51.5],[26,53.5],[28.5,55.5],[31,57.5],[33,59],[34.5,60.5],[36,62],[37,63],[37.5,64],[38.5,64.5],[39,65],[39.5,65],[39,64.5]],"data":{"class":[]},"id":"b508d83967f7b4848bf77acd53eeafc6f","position":[518,347]},{"points":[[0,0],[-0.5,0],[-1,0],[-1.5,0],[-2,-0.5],[-2.5,-1],[-2.5,-0.5],[-2,0],[-1.5,1.5],[-1,3],[0,5],[0.5,7.5],[1.5,10],[2.5,13],[3.5,15.5],[4,18.5],[4.5,22],[5,25],[5.5,27.5],[5.5,30],[5,32.5],[4.5,34],[4,35.5],[3,37],[2,38],[1,38.5],[-0.5,38.5],[-1.5,38.5],[-3,38],[-4.5,37.5],[-5.5,36.5],[-6,35.5],[-7,34.5],[-7,33.5],[-7,32],[-7,30.5],[-6.5,29],[-5.5,27],[-4.5,25.5],[-2.5,24.5],[-0.5,23],[2,21.5],[4.5,20],[7,19],[9.5,17.5],[12,16.5],[14.5,15],[16.5,13.5],[19,12.5],[21,10.5],[23,9],[24.5,7.5],[26,6],[27,4],[27.5,2.5],[28,1],[28,-0.5],[28,-2],[27,-3],[26.5,-4],[25.5,-5],[24.5,-5.5],[24,-6],[23,-5.5],[22.5,-5],[21.5,-4],[21,-2],[20.5,0.5],[20,4],[20,7.5],[19.5,11.5],[19,15.5],[18.5,19],[18,23],[17.5,26.5],[16.5,30],[15.5,33],[14.5,35.5],[13.5,37.5],[12.5,39.5],[10.5,41.5],[8,42.5],[5.5,43],[2.5,43],[0,43],[-3.5,42],[-7,41],[-11,39],[-14.5,37],[-18.5,35],[-21.5,33.5],[-24.5,31],[-27,29],[-29,27],[-31,25.5],[-32,24.5],[-33.5,23],[-34,21.5],[-34,20],[-33.5,19],[-32.5,17.5],[-31,16.5],[-29.5,16],[-27.5,15.5],[-25,15],[-21,15],[-17.5,15.5],[-13,16],[-8.5,17],[-3,18],[2,19.5],[7,20.5],[12,21.5],[17,22.5],[21.5,23.5],[25.5,24.5],[29.5,25.5],[33,26.5],[36,27.5],[39,28.5],[41.5,29],[43.5,30],[45.5,30.5],[47,31],[48.5,31.5],[49.5,32],[50,32],[51,32.5]],"data":{"class":[]},"id":"b97361a26ce267982e582e142f6843f4a","position":[517.5,661]}],
//     "groupLines":[],
//     "stickyLines":[{"points":[[0,0],[-0.5,0],[-0.5,0.5],[0,1],[0,1.5],[0.5,2.5],[1,4.5],[1,5.5],[1.5,7.5],[1.5,10],[1,12.5],[1,15.5],[0.5,19],[0,23.5],[-0.5,28],[-1,33],[-1.5,38],[-2,44],[-2.5,50],[-2.5,56.5],[-3,63],[-3,70],[-3,76.5],[-3.5,84],[-3.5,91],[-3.5,98],[-3.5,105.5],[-3.5,113],[-3.5,127],[-3.5,135.5],[-3.5,143.5],[-3.5,151.5],[-3.5,159],[-4,167],[-4.5,182.5],[-5,190],[-5.5,198],[-6,205.5],[-6.5,213.5],[-7,221],[-7.5,229],[-8.5,236.5],[-9,244],[-9.5,251.5],[-10.5,259],[-11.5,266.5],[-12,274.5],[-13,282],[-14,289],[-15,296.5],[-16,304],[-17,311],[-18,318],[-18.5,325],[-19.5,331.5],[-20,338],[-20.5,344],[-20.5,350.5],[-21,356],[-21,362],[-21,368],[-21.5,373.5],[-21.5,379],[-21.5,385],[-22,390.5],[-22,396.5],[-22,402],[-22.5,407.5],[-22.5,412.5],[-22.5,417.5],[-23,422],[-23,427],[-23.5,431.5],[-24,436],[-24,440.5],[-24.5,445],[-24.5,449.5],[-25,453.5],[-25,458],[-25.5,462],[-25.5,465.5],[-25.5,468.5],[-25.5,471.5],[-25.5,474.5],[-25.5,477],[-25.5,480],[-26,482.5],[-26,485],[-26,487],[-26,489],[-26,491],[-26,492.5],[-26,494],[-26,495.5],[-26,497],[-26,498.5],[-26,500],[-26,501],[-26,501.5],[-26,502.5],[-26,503],[-26,503.5]],"data":{"linesAttached":["b62d0de6fffe52a271a3611e9d79b33aa","b508d83967f7b4848bf77acd53eeafc6f","b97361a26ce267982e582e142f6843f4a"]},"id":"bbe57165fd7474122875c4edc72b2a7c5","position":[537,276.5]}],
//     "menuItems":[]
// } 

initialState.stickyLines = [{
    "points":[[0,0],[1.5,5],[2,7.5],[2,9],[2,10.5],[2.5,12],[2.5,13.5],[2.5,15],[2.5,16.5],[2.5,18],[2.5,20],[2.5,21.5],[2.5,23],[2.5,25],[2,27],[2,29],[2,30.5],[2,32.5],[2,34],[1.5,36],[1.5,38],[1.5,44.5],[1.5,47.5],[1.5,50],[1.5,53],[1.5,55.5],[1.5,58.5],[1.5,61.5],[1.5,64.5],[1.5,67.5],[1.5,70.5],[1.5,73.5],[1.5,76.5],[1.5,79.5],[1.5,82.5],[1.5,85.5],[1.5,88.5],[1.5,91.5],[2,95],[2,100.5],[2,106.5],[2,112.5],[2,119],[2,125],[2.5,131.5],[2.5,134.5],[2.5,138],[2.5,141],[2.5,144],[3,149.5],[3,152.5],[3,155],[3.5,160.5],[4,165],[4,167],[4,169.5],[4.5,171.5],[4.5,173.5],[5,178],[5,180],[5,182],[5,184],[5,186],[5,190.5],[5,192.5],[5,195],[5,199.5],[5,201.5],[5,203.5],[5,205.5],[5,207.5],[5,209.5],[5,211.5],[4.5,215.5],[4.5,217.5],[4.5,219],[4.5,220.5],[4.5,222.5],[4.5,224],[4.5,225.5],[4.5,228],[4.5,229],[4.5,230.5],[4.5,232.5],[4.5,234.5],[4.5,235.5],[4.5,236.5],[4.5,237.5],[4,238.5],[4,239],[4,240],[4,240.5],[4.5,241.5]],
    "data":{"linesAttached":[], 'placeHolder': [{'id':'left', 'data':{'lines':[]}}, {'id':'right', 'data':{'lines':[]}}, {'id':'top', 'data':{'lines':[]}}, {'id':'bottom', 'data':{'lines':[]}}, {'id':'middle', 'data':{'lines':[]}}]},
    "id":"b3f0f2126ae6c25432125fa9db0b22867",
    "position":[160,228],
    "textPosition":[0,0],
    "idGroup":"b3f0f2126ae6c25432125fa9db0b22868"
  }
];



  // const initialState = {
  //   "sketchLines":[{"points":[[560,272],[556.5,273.5],[553.5,276],[550.5,280],[546.5,285.5],[543.5,293],[541.5,301],[540,309],[540,317],[541.5,324],[544,331],[548,336.5],[553,341.5],[559,344.5],[566,346],[573,345.5],[580,342],[586,337.5],[591.5,332],[596,326],[599,319.5],[600.5,313.5],[601,308.5],[600.5,304],[598.5,301],[595.5,298.5],[591.5,296.5],[587,294.5],[581.5,293],[576.5,291],[571,289],[565.5,287.5],[561,286],[557.5,285.5],[554.5,286.5],[552.5,290.5]],"data":{"class":["item-b63b972fc25d021aea607f8de99051f12"]},"id":"bb82f26615bcd7c3e47e597d89e2fce2c","position":[0,0]},{"points":[[523,412],[522,417.5],[522.5,423],[524.5,428.5],[528,433.5],[531.5,437.5],[536.5,441],[542.5,442.5],[548.5,443],[555,441.5],[561,439],[566.5,435],[571.5,430],[575.5,423],[578,416],[579.5,408.5],[580,400.5],[579,392.5],[577,385.5],[573.5,379.5],[569,374.5],[564,370.5],[558.5,368],[552,367.5],[546,368.5],[540,371],[534.5,375],[529.5,380.5],[526,387],[524,394.5],[523,402],[524,410.5],[526,419.5]],"data":{"class":["item-b63b972fc25d021aea607f8de99051f12"]},"id":"b795f6ee47df6aac4e2dc510006b2c2ce","position":[0,0]},{"points":[[535,492.5],[532,495],[529,499.5],[526.5,504],[524.5,509.5],[523.5,515],[524,520.5],[525.5,525.5],[528,529.5],[531.5,533.5],[536.5,535.5],[542.5,537],[549,536.5],[556,535],[562.5,531.5],[569,526.5],[574,521.5],[578,515],[581,508.5],[582.5,502],[583,496.5],[581.5,491.5],[579.5,487.5],[575.5,484],[571,481.5],[566,480],[560.5,479.5],[555,480],[549,482],[543.5,484.5],[539.5,488],[535.5,492.5],[532.5,497.5]],"data":{"class":["item-b63b972fc25d021aea607f8de99051f12"]},"id":"b55509dd13ce7f75a21d00a50a2b697ba","position":[0,0]}],
  //   "groupLines":[],
  //   "stickyLines":[{"points":[[602,201.5],[599,207.5],[595,216.5],[589.5,227],[584.5,238],[579.5,250],[574.5,263.5],[569.5,278],[565,293],[560,309],[556,325],[553,341],[549.5,357.5],[546.5,374],[543.5,390.5],[540.5,408],[538,426.5],[536.5,445.5],[535,466.5],[534.5,488.5],[534.5,510],[535.5,531.5],[536.5,551.5],[538.5,568.5],[541,583.5],[543.5,596.5],[545.5,606.5],[548,614.5],[550.5,620.5],[551.5,625],[552,628.5],[552,630.5],[551.5,633]],"data":{"linesAttached":["bb82f26615bcd7c3e47e597d89e2fce2c","b795f6ee47df6aac4e2dc510006b2c2ce","b55509dd13ce7f75a21d00a50a2b697ba"]},"id":"b63b972fc25d021aea607f8de99051f12","position":[0,0]}],
  //   "menuItems": []
  // }
//   const initialState = {
//   "sketchLines":[{"points":[[0,0],[1.5,-0.5],[3.5,-1],[5.5,-1],[11.5,-1.5],[15,-2],[18.5,-2.5],[22,-3],[25.5,-3.5],[29,-4],[32.5,-4.5],[35.5,-5],[38.5,-5],[41.5,-5.5],[43.5,-5.5],[46,-5.5],[47.5,-5],[49.5,-4.5],[51,-4]],"data":{"class":[]},"id":"b1e5d01d7acb34eafe70abca9765743a9","position":[509.5,264]},{"points":[[0,0],[-1,0.5],[-1.5,0.5],[-2.5,1],[-3,1.5],[-3.5,2],[-4,2.5],[-4,3],[-3,3],[-2.5,3.5],[0.5,4],[2.5,4],[4.5,3.5],[7,3.5],[10,3],[13,2.5],[15.5,2],[19,1.5],[22,1],[25,0.5],[28.5,-0.5],[32.5,-1],[35.5,-1.5],[39,-2.5],[42,-3],[45,-3.5],[48,-4],[50.5,-4.5],[53,-5]],"data":{"class":[]},"id":"b052ac3400f1363ac30b3e395b701d0b8","position":[508.5,292.5]},{"points":[[0,0],[0.5,0],[2,0],[3,0],[5,-0.5],[7,-0.5],[9,-1],[12,-1],[18.5,-2],[22,-3],[25.5,-3.5],[29,-4],[33,-5],[36.5,-5.5],[40.5,-6],[45,-6.5],[48.5,-7],[52.5,-7.5],[56,-7.5],[60,-8],[63.5,-8],[66.5,-8.5],[69.5,-9],[72,-9]],"data":{"class":[]},"id":"beabadaa7966a83f7b7752bf89d15fc81","position":[497,326]},{"points":[[0,0],[0.5,0],[1,0],[2,-0.5],[3.5,-0.5],[6,-1],[8.5,-1.5],[15,-2],[18.5,-2.5],[22.5,-3],[26,-3.5],[30,-4],[33.5,-4.5],[37,-5],[40.5,-5.5],[44,-6],[47.5,-6],[51,-6.5],[54,-6.5],[57.5,-6],[60.5,-6],[63.5,-6],[66.5,-5.5],[69,-5],[71,-4.5],[73,-4.5]],"data":{"class":[]},"id":"befc7d2efc099d0ae73e05b46c2e746b0","position":[495,370.5]},{"points":[[0,0],[1,0],[1.5,0],[2.5,0],[4.5,0],[6.5,-0.5],[9.5,-1],[16,-2.5],[20,-3.5],[24,-4.5],[28,-5],[32.5,-6],[37,-7],[41.5,-7.5],[45.5,-8.5],[50,-9],[54,-9],[58,-9.5],[62.5,-9.5],[66.5,-9.5],[70.5,-9.5],[74,-9.5],[77.5,-9.5],[80.5,-9],[83.5,-9],[86,-9],[88.5,-9]],"data":{"class":[]},"id":"b66b700c65ca64b4c1120c19c2a2f0d5c","position":[495,411]},{"points":[[0,0],[1.5,-0.5],[2.5,-0.5],[4,-1],[6,-1.5],[9,-1.5],[12.5,-2.5],[21,-4],[25.5,-5],[31,-6],[36,-7.5],[41,-8.5],[45.5,-9.5],[50.5,-10.5],[55.5,-11],[60,-11.5],[64,-11.5],[68,-12],[72,-12],[76,-12],[80,-12]],"data":{"class":[]},"id":"b21516aa4d5be361e81596eb65b3b2781","position":[504,447]},{"points":[[0,0],[0,0.5],[0.5,0.5],[1.5,0.5],[3,1],[5,2],[10,3.5],[13,3.5],[16,4],[20,4.5],[24,4.5],[28,4.5],[32,4.5],[36,4],[40.5,3.5],[45.5,3],[49.5,2],[54,1],[59,-0.5],[64,-1.5],[68.5,-2.5],[73,-4],[77,-4.5],[80.5,-5.5],[83.5,-6]],"data":{"class":[]},"id":"b110425c0d2ea5901ad75c4a4fa25d04a","position":[494,478]}],
//   "groupLines":[],
//   "stickyLines":[{"points":[[0,0],[-0.5,0],[0,0],[0.5,0.5],[0.5,1],[1,4],[1.5,6],[1.5,8.5],[1,11],[1,13.5],[0.5,16.5],[0.5,19.5],[0,23],[-0.5,26.5],[-1,30],[-1.5,33.5],[-1.5,37.5],[-2,41.5],[-2,46],[-2,50.5],[-2.5,55.5],[-2.5,60.5],[-2.5,65.5],[-2.5,70.5],[-2.5,76],[-2.5,81.5],[-2.5,86.5],[-2.5,91.5],[-2.5,96.5],[-2,101.5],[-2,106.5],[-1.5,111.5],[-1,116.5],[-0.5,121.5],[0.5,126.5],[0.5,131.5],[1,136.5],[1.5,141.5],[1.5,146.5],[2,151],[2,155.5],[2.5,160],[3,165],[3.5,169.5],[4,174.5],[4.5,179],[5.5,184.5],[7,193.5],[8,199],[8.5,204],[9,209],[9.5,214.5],[10.5,223.5],[10.5,228.5],[11,234],[11,243.5],[11,249.5],[11,255.5],[11,261.5],[11,267],[11,273.5],[10.5,286],[10.5,292],[10,298.5],[10,305],[10,311],[9.5,318],[9.5,324.5],[9.5,331],[9,337.5],[9,344],[8.5,350.5],[8,357.5],[8,364],[7.5,371],[7.5,378],[7,384.5],[7,391],[7,398],[7,404.5],[6.5,411],[6.5,418],[6.5,425],[6,432],[5.5,439.5],[5,447],[4.5,454],[4,461.5],[3.5,469],[3,476],[2.5,483],[2,490],[2,497],[1.5,504.5],[1,511.5],[1,518.5],[0.5,526],[0,533],[0,540.5],[-0.5,547.5],[-0.5,555],[-0.5,561.5],[-1,568.5],[-1,574.5],[-1,580.5],[-1.5,586],[-1.5,590],[-2,593],[-2.5,595.5]],"data":{"linesAttached":["b1e5d01d7acb34eafe70abca9765743a9","b052ac3400f1363ac30b3e395b701d0b8","beabadaa7966a83f7b7752bf89d15fc81","befc7d2efc099d0ae73e05b46c2e746b0","b66b700c65ca64b4c1120c19c2a2f0d5c","b21516aa4d5be361e81596eb65b3b2781","b110425c0d2ea5901ad75c4a4fa25d04a"]},"id":"bada8e81365f22102c99095592e1d9668","position":[538.5,172]}],
//   "menuItems":[],
//   // "lettres"
// }

  const rootReducer = (state = initialState, action) => {
    // console.log(action.type)
    // console.log(JSON.stringify(state.stickyLines))
    switch (action.type) {
      
      case 'ADD_SKETCH_LINE':
        // console.log(state.sketchLines)
        return { 
          ...state, 
          sketchLines: [ ...state.sketchLines, action.data] 
        };
        case 'CREATE_STICKY_LINES':
            return { 
              ...state, 
              stickyLines: [ ...state.stickyLines, action.data] 
            };
      case 'CREATE_GROUP_LINES':
        return { 
          ...state, 
          groupLines: [ ...state.groupLines, action.data] 
        };
      
      
        case 'SHOULD_OPEN_MENU':
        if (action.data.shouldOpen == true){
          return { 
            ...state, 
            menuItems: [ ...state.menuItems, action.data] 
          };
        }
        else if (action.data.shouldOpen == false){
          var index = state.menuItems.indexOf(state.menuItems.find(x => x.id == action.data.id))
          if (index > -1){
            state = update(state, { 
              menuItems: {$splice: [[index, 1]]}
            })
          }
          return state;
        }
         
      case 'ADD_LINES_CLASS':
        var idsLine = action.data.idLines;
       
        idsLine.forEach((id)=>{
          var index = state.sketchLines.indexOf(state.sketchLines.find(x => x.id == id))
          if (index > -1){
            // console.log(state.sketchLines[index]['data']['class'])
            state = update(state, { 
              sketchLines: {
                [index] : {
                  data: {
                    class: {$push: action.data.class},
                  }
                }
              }
            })
          }
        })
        return state;


        case 'ADD_LINES_TO_STICKY':
          var id = action.data.id;
          console.log(action.data)
          // 'data': {'linesAttached': this.objectIn}, 
          // idsLine.forEach((id)=>{
            var index = state.stickyLines.indexOf(state.stickyLines.find(x => x.id == id))
            // console.log(index)
            if (index > -1){
              console.log(action.data, state.stickyLines[index])
              // console.log(state.sketchLines[index]['data']['class'])
              state = update(state, { 
                stickyLines: {
                  [index] : {
                    data: {
                      linesAttached: {$push: action.data.idLines},
                    }
                  }
                }
              })
            }
          
          return state;

        
        // console.log(action.data)

      case 'REMOVE_SKETCH_LINES':
          var idsToDelete = action.data;
          idsToDelete.forEach((idToDelete)=>{
            var index = state.sketchLines.indexOf(state.sketchLines.find(x => x.id == idToDelete))
            if (index > -1){
              state = update(state, { 
                sketchLines: {$splice: [[index, 1]]}
              })
            }
          })
          return state;

        
        
      default:
        return state;
    }
  }
    

  export default combineReducers({
    rootReducer : undoable(rootReducer)
  })

  