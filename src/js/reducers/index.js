import {guid} from './../components/Helper';
import update from 'immutability-helper';
import { combineReducers } from 'redux';
import undoable, { distinctState } from 'redux-undo';
import { includeAction, excludeAction } from 'redux-undo';

const initialState = { 
    'sketchLines': [],
    'groupLines': [],
    'stickyLines': [],
    "menuItems": [],
    "lettres": []
  };

  // function populateLetters(){
  //   var alphabet = 'abcdefghijklmnopqrstuvwxyz'.split('');
  //   alphabet.forEach((d)=>{
  //     var data = {
  //       'lettre':d,
  //       'data': [], 
  //       'id': guid()
  //     }


  //     initialState.lettres.push(data);
  //   })
  // }

  // populateLetters();


 initialState.groupLines = [{"id":"b772ccd0602a96c738455f9e45b226baf","lines":[["beb8a15a86dd81c46a1d905c4193bfcae","beb8a15a86dd81c46a1d905c4193bfcae","bfc7f035e3838bd1e1b12be08097df43f"],["ba72045a3aabde82f1a67d73d0aa50bff","ba72045a3aabde82f1a67d73d0aa50bff","b81604ce55737d2034fd5c76fcf165341","bd0e4b1cd3df6b0e1aac14c8b93feb110"]],"position":[0,0],"model":{"points":[[0,0],[0,49.5],[0.5,59.5],[1,69],[1,74],[1.5,79],[2,83.5],[2,88.5],[2.5,93.5],[3,98.5],[3.5,103.5],[4,108.5],[4,114],[4.5,118.5],[5,124],[6,129],[6.5,134],[6.5,138.5],[7,143],[7,148],[7.5,152],[7.5,156.5],[8,160],[8,164],[8.5,168],[8.5,171.5],[8.5,175],[8.5,178.5],[8.5,185.5],[8.5,188],[8.5,191],[8.5,196.5],[8.5,198.5],[8.5,201],[8.5,202.5],[8.5,204.5],[8.5,206],[9,208.5],[9,209]],"id":"bd971d88ac4aa27fa2f392b897e9bb0f4","placeHolder":[{"id":"left","data":{},"lines":[{"id":"b22f59d6038b0ae7d1248f998236e893d","data":[[-88.5,47.5],[-88.5,48],[-88,48.5],[-88,49],[-87.5,49],[-87.5,49.5],[-86.5,50.5],[-86,51.5],[-85,53],[-84,54.5],[-83,56],[-82.5,56.5],[-82,57.5],[-80.5,59],[-79,60],[-77,61],[-75,62.5],[-73,64],[-71,65.5],[-69.5,67],[-67.5,68.5],[-67,69],[-66,70],[-64.5,72],[-63,73.5],[-62,74.5],[-61,75],[-59.5,77],[-58.5,77.5],[-57.5,78.5],[-56.5,79.5],[-55.5,80.5],[-55,81],[-54,82],[-53,82.5],[-52.5,83.5],[-51.5,84],[-51,85],[-50.5,85.5],[-50,86.5],[-49,87.5],[-48.5,88.5],[-48,88.5],[-47,90],[-47,90.5],[-46.5,91],[-46,92.5],[-46,93],[-46,93.5],[-46,94],[-46,94.5],[-46,95]]},{"id":"b9cb38f5153dd04329f271184509c7d5c","data":[[-56,43.5],[-56.5,43.5],[-57,43.5],[-57.5,43.5],[-57.5,44],[-58,44.5],[-58.5,45],[-59,46],[-60,47],[-60.5,48],[-61.5,49],[-62,50],[-63,52],[-64,53.5],[-65,55],[-65.5,56],[-66,56.5],[-67,58],[-67.5,59],[-67.5,60],[-68,60.5],[-68.5,61.5],[-69.5,63],[-70,64],[-71,65],[-72,67],[-72.5,68],[-73,69],[-74,70],[-74.5,71.5],[-76,73],[-76.5,74],[-77,75],[-77.5,76.5],[-78,77],[-78.5,78],[-79,79],[-80,80],[-80,81],[-80.5,81.5],[-81,82],[-81.5,83],[-82,84],[-82.5,85.5],[-83,86.5],[-83.5,87.5],[-83.5,88],[-84,89],[-84.5,90],[-85,91],[-85.5,91.5],[-85.5,92],[-85.5,92.5],[-86,93],[-86,93.5],[-86.5,94.5]]},{"id":"b3d27e0382f646e572d5fc0162c24c9f0","data":[[-74,42.5],[-73.5,43],[-73.5,43.5],[-73,44],[-73,44.5],[-73,45],[-73,45.5],[-73,46],[-72.5,46.5],[-72.5,47],[-72.5,48],[-72.5,48.5],[-72.5,49],[-72.5,49.5],[-72,50.5],[-72,51.5],[-72,52],[-71.5,53],[-71.5,54],[-71.5,55],[-71,55.5],[-71,56.5],[-71,57.5],[-70.5,58],[-70.5,59],[-70,61],[-69.5,62],[-69.5,63],[-69,65.5],[-68.5,66.5],[-68,67.5],[-67.5,70],[-67.5,71.5],[-67,73],[-66.5,74.5],[-66.5,76],[-66,77.5],[-66,78.5],[-65.5,80],[-65,81.5],[-65,82.5],[-64.5,84],[-64.5,85.5],[-64,86.5],[-64,88],[-63.5,89.5],[-63,90.5],[-63,92],[-62,95],[-62,96],[-61.5,97.5],[-61.5,99.5],[-61,100.5],[-61,101.5],[-60.5,103.5],[-60.5,104],[-60.5,105],[-60,105.5],[-60,106],[-59.5,107],[-59.5,107.5]]}]},{"id":"right","data":{},"lines":[]},{"id":"top","data":{},"lines":[]},{"id":"bottom","data":{},"lines":[]},{"id":"middle","data":{},"lines":[]}],"position":[149.5,225.5],"textPosition":{"where":"right","position":[10,50]}},"stroke":{"points":[[0,0],[0,1],[-0.5,3.5],[-1,5],[-1,7],[-0.5,12],[-0.5,17.5],[-0.5,24],[-0.5,31.5],[-1,40],[-1,44],[-1,48.5],[-1,58],[-1,68],[-1,78.5],[-1.5,101],[-2,113],[-2,117.5],[-2,122.5],[-2.5,132.5],[-3,143],[-3.5,148.5],[-3.5,154],[-4.5,167.5],[-5,180.5],[-5.5,191.5],[-5.5,197.5],[-5.5,202.5],[-6,212],[-6,220.5],[-6,227.5],[-6,234],[-5.5,239],[-5,241]],"position":[454.5,98]}}]

initialState.stickyLines = [{"points":[[0,0],[0,49.5],[0.5,59.5],[1,69],[1,74],[1.5,79],[2,83.5],[2,88.5],[2.5,93.5],[3,98.5],[3.5,103.5],[4,108.5],[4,114],[4.5,118.5],[5,124],[6,129],[6.5,134],[6.5,138.5],[7,143],[7,148],[7.5,152],[7.5,156.5],[8,160],[8,164],[8.5,168],[8.5,171.5],[8.5,175],[8.5,178.5],[8.5,185.5],[8.5,188],[8.5,191],[8.5,196.5],[8.5,198.5],[8.5,201],[8.5,202.5],[8.5,204.5],[8.5,206],[9,208.5],[9,209]],"id":"bd971d88ac4aa27fa2f392b897e9bb0f4","placeHolder":[{"id":"left","data":{},"lines":[{"id":"b22f59d6038b0ae7d1248f998236e893d","data":[[-88.5,47.5],[-88.5,48],[-88,48.5],[-88,49],[-87.5,49],[-87.5,49.5],[-86.5,50.5],[-86,51.5],[-85,53],[-84,54.5],[-83,56],[-82.5,56.5],[-82,57.5],[-80.5,59],[-79,60],[-77,61],[-75,62.5],[-73,64],[-71,65.5],[-69.5,67],[-67.5,68.5],[-67,69],[-66,70],[-64.5,72],[-63,73.5],[-62,74.5],[-61,75],[-59.5,77],[-58.5,77.5],[-57.5,78.5],[-56.5,79.5],[-55.5,80.5],[-55,81],[-54,82],[-53,82.5],[-52.5,83.5],[-51.5,84],[-51,85],[-50.5,85.5],[-50,86.5],[-49,87.5],[-48.5,88.5],[-48,88.5],[-47,90],[-47,90.5],[-46.5,91],[-46,92.5],[-46,93],[-46,93.5],[-46,94],[-46,94.5],[-46,95]]},{"id":"b9cb38f5153dd04329f271184509c7d5c","data":[[-56,43.5],[-56.5,43.5],[-57,43.5],[-57.5,43.5],[-57.5,44],[-58,44.5],[-58.5,45],[-59,46],[-60,47],[-60.5,48],[-61.5,49],[-62,50],[-63,52],[-64,53.5],[-65,55],[-65.5,56],[-66,56.5],[-67,58],[-67.5,59],[-67.5,60],[-68,60.5],[-68.5,61.5],[-69.5,63],[-70,64],[-71,65],[-72,67],[-72.5,68],[-73,69],[-74,70],[-74.5,71.5],[-76,73],[-76.5,74],[-77,75],[-77.5,76.5],[-78,77],[-78.5,78],[-79,79],[-80,80],[-80,81],[-80.5,81.5],[-81,82],[-81.5,83],[-82,84],[-82.5,85.5],[-83,86.5],[-83.5,87.5],[-83.5,88],[-84,89],[-84.5,90],[-85,91],[-85.5,91.5],[-85.5,92],[-85.5,92.5],[-86,93],[-86,93.5],[-86.5,94.5]]},{"id":"b3d27e0382f646e572d5fc0162c24c9f0","data":[[-74,42.5],[-73.5,43],[-73.5,43.5],[-73,44],[-73,44.5],[-73,45],[-73,45.5],[-73,46],[-72.5,46.5],[-72.5,47],[-72.5,48],[-72.5,48.5],[-72.5,49],[-72.5,49.5],[-72,50.5],[-72,51.5],[-72,52],[-71.5,53],[-71.5,54],[-71.5,55],[-71,55.5],[-71,56.5],[-71,57.5],[-70.5,58],[-70.5,59],[-70,61],[-69.5,62],[-69.5,63],[-69,65.5],[-68.5,66.5],[-68,67.5],[-67.5,70],[-67.5,71.5],[-67,73],[-66.5,74.5],[-66.5,76],[-66,77.5],[-66,78.5],[-65.5,80],[-65,81.5],[-65,82.5],[-64.5,84],[-64.5,85.5],[-64,86.5],[-64,88],[-63.5,89.5],[-63,90.5],[-63,92],[-62,95],[-62,96],[-61.5,97.5],[-61.5,99.5],[-61,100.5],[-61,101.5],[-60.5,103.5],[-60.5,104],[-60.5,105],[-60,105.5],[-60,106],[-59.5,107],[-59.5,107.5]]}]},{"id":"right","data":{},"lines":[]},{"id":"top","data":{},"lines":[]},{"id":"bottom","data":{},"lines":[]},{"id":"middle","data":{},"lines":[]}],"position":[149.5,225.5],"textPosition":{"where":"right","position":[10,50]}}]

initialState.sketchLines = [{"points":[[0,0],[1,0],[1.5,-0.5],[2.5,-1.5],[4,-3.5],[5,-4.5],[7,-7.5],[9.5,-12],[11,-15],[12,-18.5],[13,-22.5],[14,-26],[14,-28.5],[15,-34],[15.5,-36],[16,-42],[16,-44],[16.5,-49.5],[16.5,-51],[17,-54.5],[17,-55.5],[17,-57],[17,-57.5],[17,-57],[17,-56.5],[16.5,-55.5],[16,-52.5],[15.5,-49.5],[15.5,-46],[15.5,-44],[15,-37.5],[14.5,-33],[14,-28.5],[13.5,-25.5],[12.5,-18.5],[12,-16],[11,-9.5],[10.5,-5.5],[10,-1.5],[9.5,3.5],[9.5,5.5],[10.5,6],[11.5,5],[11.5,3],[12,2],[13,-2],[13.5,-4.5],[14.5,-7.5],[15,-10.5],[16,-13],[17,-15],[17.5,-17.5],[18,-18.5],[19.5,-20.5],[20.5,-21],[22,-22.5],[24.5,-23.5],[27,-22.5],[28,-22],[29.5,-19],[30,-18],[30.5,-14.5],[31,-13.5],[31.5,-10.5],[32,-8.5],[32.5,-6.5],[32.5,-6],[34,-4],[34,-3.5],[35.5,-2.5],[37,-2.5],[38,-3],[39,-4],[40,-4.5],[42,-6.5],[43,-7.5],[45.5,-10],[49.5,-13.5],[51,-15.5],[52,-18],[53.5,-22],[53.5,-22.5],[54,-25],[54,-26.5],[54,-27.5],[53,-28],[52.5,-28.5],[52,-28.5],[50.5,-28],[50,-28],[48,-26],[47,-24.5],[46.5,-22.5],[45.5,-17.5],[45,-16.5],[45.5,-12],[45.5,-11],[46,-7],[46.5,-6],[48,-3],[48.5,-2],[51,-0.5],[51.5,0],[53.5,0.5],[55,0],[56,-0.5],[57.5,-2],[58.5,-3],[59,-4],[61,-7],[61.5,-8],[63.5,-11.5],[66.5,-17],[67,-18.5],[69,-23.5],[69.5,-25],[71,-29.5],[71.5,-31],[72.5,-35],[72.5,-36],[72.5,-39],[72.5,-40],[72,-41.5],[71.5,-42],[70,-42],[69,-41],[68,-39.5],[68,-38.5],[66.5,-35],[65.5,-32],[65.5,-28.5],[65,-27],[64.5,-21],[64.5,-17],[64.5,-13],[64.5,-9],[65,-5.5],[65,-3.5],[65.5,1.5],[67.5,6.5],[68,7.5],[70,9],[71.5,9.5],[73,10],[73.5,9.5],[75.5,9],[76,8],[77.5,5.5],[78,4.5],[80,0],[82,-6.5],[82.5,-8.5],[84.5,-14],[85,-15.5],[86.5,-21],[87,-22.5],[88.5,-27.5],[89,-29.5],[90.5,-33.5],[91,-35],[91.5,-38.5],[92,-39.5],[92,-42],[92,-42.5],[91.5,-43.5],[91.5,-44],[90.5,-44],[90,-43.5],[89,-42.5],[88.5,-42],[87,-39.5],[86.5,-38.5],[85.5,-35.5],[85,-33.5],[84.5,-30.5],[84.5,-29],[84,-23.5],[84,-21.5],[84,-16],[84,-14],[84.5,-8.5],[84.5,-6.5],[85.5,-2],[86.5,0.5],[87.5,2.5],[89,4],[90.5,5],[91,5.5],[93,6.5],[94,7],[95.5,7],[96.5,6.5],[97.5,5.5],[98,5],[99,2.5],[100,0.5],[100.5,-1.5],[101.5,-6.5],[102,-9],[102,-11],[102.5,-13],[102.5,-14.5],[102.5,-15],[103,-16.5],[102.5,-16],[102.5,-15],[102.5,-14],[102,-12],[102,-10.5],[102.5,-7.5],[102.5,-6],[103,-2.5],[103,-1.5],[103.5,1.5],[104,2.5],[105,4.5],[105,5],[106.5,6],[107.5,6],[109.5,6],[113,5],[114.5,4],[115.5,2.5],[116.5,0.5],[117.5,-1.5],[119,-6],[119,-7.5],[120,-10.5],[120,-11.5],[120,-14],[120,-15],[120,-18],[119.5,-19],[119,-21],[118.5,-22],[117.5,-23.5],[117,-24],[115,-24.5],[114,-25],[111.5,-25],[110.5,-25],[108,-24],[107,-24],[105,-22.5],[104,-22],[103,-20],[102.5,-19],[102,-17],[101.5,-16],[101.5,-15],[101.5,-14],[102,-12.5],[102,-12],[103,-11],[103.5,-10.5],[104.5,-10],[105,-10],[107.5,-9.5],[108.5,-9.5],[111.5,-9.5],[112.5,-9.5],[115,-10.5],[116,-10.5],[118,-11],[118.5,-11.5],[120,-12.5],[121.5,-13.5],[122,-14]],"data":{"class":[]},"id":"beb8a15a86dd81c46a1d905c4193bfcae","position":[388.5,159.5]},{"points":[[0,0],[0.5,-0.5],[1.5,-2.5],[2,-4],[3,-5.5],[5,-9],[7,-14],[8,-16.5],[9,-19.5],[10,-25],[10.5,-28.5],[10.5,-29.5],[10.5,-30],[10.5,-29.5],[9.5,-26.5],[9,-24],[8.5,-21.5],[8.5,-20.5],[8,-16.5],[8,-15],[8.5,-11],[8.5,-9.5],[9.5,-5.5],[10.5,-1],[12,2],[13,2.5],[13.5,2.5],[14,2.5],[15,2],[16,-1],[17.5,-5],[18.5,-10.5],[19,-13.5],[19.5,-16],[19.5,-17],[20,-21],[20,-23.5],[20,-25],[20,-25.5],[20.5,-26.5],[20,-25],[20,-23],[20,-21],[20,-20],[19.5,-17],[20,-15.5],[20,-12],[20,-10],[20.5,-8],[20.5,-7],[21,-4],[21.5,-3],[22.5,-1],[22.5,-0.5],[24,1],[26,2],[26.5,2],[28,2],[29,2],[30.5,0.5],[31.5,0],[32.5,-2],[33,-3],[34,-5],[34,-5.5],[34.5,-8],[35,-9],[35.5,-12],[35.5,-14],[36,-16],[36,-17],[36,-21],[36,-22],[36,-25],[36,-25.5],[35.5,-27.5],[35.5,-28.5],[34.5,-29.5],[34,-30],[33.5,-29.5],[33,-29],[32.5,-28.5],[32,-27.5],[32,-27],[32,-25.5],[32.5,-25.5],[33,-24.5],[33.5,-24],[34.5,-24],[35.5,-24],[36,-24.5],[37,-25],[38,-26],[39,-27],[39.5,-27.5],[39.5,-26.5],[40,-26],[40,-23.5],[39.5,-22.5],[39.5,-19.5],[39.5,-18],[39,-15],[39.5,-10.5],[39.5,-9],[39.5,-6],[39.5,-5],[40,-3],[40.5,-2.5],[41,-1],[41.5,-0.5],[42.5,-0.5],[43,-0.5],[44.5,-2],[45,-2.5],[46.5,-4.5],[47,-5.5],[48.5,-8],[49,-9],[50.5,-12],[51,-13.5],[52,-16.5],[52,-17.5],[52.5,-21.5],[52.5,-22.5],[51.5,-26],[51,-27],[50.5,-27.5],[48.5,-29.5],[45.5,-31.5],[44.5,-32],[42,-32.5],[41.5,-32],[40,-31],[39,-28.5],[39,-25],[39,-24],[40,-22],[40,-21.5],[41.5,-20],[44,-19.5],[47,-20],[49.5,-21],[50.5,-21.5],[51.5,-22],[53,-23.5],[53,-24],[54,-25.5],[54,-26],[54.5,-26.5],[54.5,-26],[54.5,-25.5],[54,-23.5],[54,-23],[54,-20.5],[53.5,-19.5],[53.5,-17],[53.5,-16],[54,-13.5],[54,-12.5],[54.5,-10],[55,-6.5],[56.5,-4.5],[56.5,-4],[57,-3],[57.5,-3],[58,-3],[58.5,-3],[59.5,-3.5],[59.5,-4],[60.5,-5],[60.5,-6],[61.5,-7.5],[62,-8.5],[63,-11.5],[63.5,-12.5],[65,-16],[65.5,-17],[67,-22],[67.5,-23.5],[69,-29],[70,-32.5],[70.5,-36],[71,-38],[71.5,-43.5],[71,-45.5],[70.5,-50],[70,-51.5],[69.5,-54],[68.5,-55],[68,-56],[67.5,-56.5],[67,-57],[65.5,-57],[65,-56.5],[64,-55],[64,-54],[63.5,-50.5],[63,-49],[63,-43.5],[63,-42],[63,-36],[63,-34],[63.5,-27],[63.5,-25],[64,-18.5],[64,-17],[65,-12],[65,-10.5],[66,-7],[66.5,-6],[68,-3.5],[68.5,-3],[70,-2.5],[74.5,-5],[76.5,-8.5],[78,-12.5],[79,-17],[79.5,-18],[80,-21],[80,-21.5],[80,-21],[80,-20],[80,-18],[80,-17.5],[80,-14.5],[80,-13.5],[80,-11],[80,-10],[81,-7.5],[81,-6.5],[82,-4.5],[82,-4],[83.5,-2.5],[83.5,-2],[85,-1.5],[85.5,-1.5],[87.5,-2],[88,-2.5],[90,-4],[91,-4.5],[93,-7],[93.5,-8],[94.5,-10.5],[95.5,-12.5],[95.5,-14.5],[95.5,-15],[95.5,-18],[95.5,-19],[94,-22],[93.5,-22.5],[91,-25],[88,-26],[87.5,-26],[85.5,-25],[84.5,-24.5],[83,-22.5],[82.5,-21.5],[81.5,-19.5],[81.5,-18.5],[81,-17.5],[81,-17],[81.5,-17.5],[82,-17.5],[82.5,-19],[83,-19.5],[84,-22],[84.5,-23.5],[85.5,-27],[86,-28],[87,-32.5],[87.5,-34],[88,-38.5],[88.5,-40],[88.5,-45],[89,-46.5],[89.5,-50],[89.5,-51.5],[90,-53.5],[90.5,-54],[91,-54.5],[91.5,-54],[92.5,-52.5],[93,-50.5],[93.5,-49],[94,-43.5],[94.5,-42],[95,-36],[95.5,-31.5],[95.5,-26.5],[96,-24],[96.5,-17.5],[97.5,-9.5],[97.5,-7.5],[98.5,-3],[99,-2],[100.5,0.5],[101,1],[102,2],[102.5,2],[104.5,1.5],[105,1],[107,-1.5],[108,-2.5],[110.5,-6],[111.5,-7.5],[114.5,-12]],"data":{"class":[]},"id":"bfc7f035e3838bd1e1b12be08097df43f","position":[535.5,162.5]},{"points":[[0,0],[0,0.5],[0,2],[-0.5,5],[-1.5,10],[-1.5,13],[-2,16.5],[-2.5,18.5],[-2.5,23.5],[-3.5,30.5],[-4.5,37],[-4.5,38.5],[-5,43],[-5.5,44.5],[-5.5,47.5],[-5.5,49.5],[-5.5,50.5],[-5,51.5],[-5,52],[-4.5,52],[-4,52],[-4,51.5],[-3.5,51],[-3,49.5],[-3,49],[-2.5,47],[-2,45.5],[-2,43.5],[-1.5,42.5],[-1,39.5],[-0.5,38.5],[0.5,35.5],[1.5,33.5],[2.5,32],[4,29],[4.5,28.5],[6,27.5],[6.5,27.5],[7,27.5],[7.5,28],[8.5,28.5],[9,29.5],[9.5,30.5],[10,31.5],[11,33.5],[11,35],[11.5,36.5],[12,41],[12,43],[12.5,45],[12.5,46],[13.5,48],[14,49],[15.5,50.5],[16,51],[17,52],[17.5,52],[19,52.5],[20,52],[21.5,51.5],[22,51.5],[23.5,49.5],[24.5,47.5],[25.5,46],[26,45],[27,41.5],[28,37],[28.5,35],[29,33],[29.5,32],[29.5,30],[29.5,29.5],[30,28.5],[30,29.5],[30,30.5],[30,33],[30,34],[30,38],[30,39],[30,43],[30.5,44.5],[31,47.5],[31,48],[32.5,50],[33.5,51],[34.5,51.5],[35.5,51.5],[37,51],[37.5,50.5],[40,49],[40.5,48.5],[42.5,46],[43,45],[45,42],[45.5,40.5],[46.5,37],[47,36],[47.5,33],[47.5,32],[48,29.5],[47.5,29],[47,27.5],[47,27],[45.5,25.5],[44,25],[42.5,24.5],[41,24.5],[39,24.5],[38,24.5],[35.5,25.5],[34.5,26],[32.5,28],[32.5,28.5],[31.5,31],[31,32],[31,35],[31,36],[31.5,38.5],[32,39.5],[33,41],[33.5,41.5],[35.5,42.5],[36,42.5],[38.5,42],[42,40.5],[42.5,39.5],[45,37.5],[45.5,36.5],[47.5,34],[48,33],[49.5,30.5],[50,29.5],[50.5,27],[51,26],[51.5,24],[51.5,23.5],[51.5,24],[51.5,25.5],[51.5,26.5],[51,29],[51,30.5],[51,34.5],[51,36],[51,40.5],[51,41.5],[51,45],[51,46.5],[52,48],[52,48.5],[53,49.5],[53.5,49.5],[54.5,49.5],[55,49.5],[56,48],[56.5,47.5],[57.5,45],[58,44.5],[59.5,41],[60,39.5],[61,36],[61.5,35],[62,32],[62.5,31],[62.5,29],[62.5,28.5],[62.5,28],[62.5,28.5],[62.5,30.5],[62.5,31.5],[62.5,35],[62.5,38],[62.5,40.5],[63,42],[63.5,45],[63.5,46],[64.5,48],[65,48],[66,49],[66.5,49],[68,49.5],[68.5,49.5],[70,48.5],[70,48],[72,46],[72.5,45],[74.5,42],[74.5,40.5],[76.5,37],[77,36],[78,32.5],[78.5,31],[79.5,27.5],[80,26.5],[80,24],[80,23],[79.5,20.5],[79,20],[78,18.5],[76.5,17.5],[76,17],[75,17],[74.5,17],[73.5,17.5],[73,18.5],[72.5,19.5],[72.5,20],[72,22],[72,23],[72.5,24.5],[73,25],[74.5,26],[76.5,27.5],[77,28],[79,28.5],[82.5,28],[85.5,27.5],[86,27],[88.5,26],[89,25.5],[91,24],[91.5,24],[92.5,22.5]],"data":{"class":[]},"id":"ba72045a3aabde82f1a67d73d0aa50bff","position":[394,196.5]},{"points":[[0,0],[0,-0.5],[0.5,-1],[0.5,-1.5],[1,-2],[2,-3],[2.5,-3.5],[3.5,-5],[5.5,-6.5],[6.5,-7],[7,-7],[8,-7.5],[8.5,-7.5],[10,-7],[11.5,-6],[12.5,-4],[12.5,-3.5],[13,-0.5],[13.5,3],[13,5],[13,7],[12.5,10],[12.5,11],[12,11.5],[11,13.5],[9.5,16],[8.5,17],[8,17.5],[7.5,17.5],[6,18],[5,18],[4,18],[3,16.5],[2.5,15.5],[2,14],[2,13],[2,10],[2,8.5],[3,5.5],[3.5,4.5],[5,2.5],[5.5,1.5],[7,0.5],[7.5,0.5],[9.5,0.5],[11,2],[11.5,2.5],[12.5,3.5],[14,6.5],[15,8.5],[15.5,11],[16.5,13],[17,14.5],[18,16.5],[18.5,17.5],[19,18],[20,19.5],[20.5,19.5],[21.5,20],[22,19.5],[22.5,19],[23,19],[24,17],[24,16.5],[25,13.5],[26.5,9],[26.5,8],[27,5],[27.5,3.5],[28,3],[28,2.5],[28.5,3],[29,3.5],[30,4],[30,4.5],[31.5,5.5],[33,6],[33.5,6],[34,6],[36.5,5.5],[37,5.5],[39,3.5],[40,3],[41.5,1.5],[43.5,-1.5],[44,-2],[45.5,-4.5],[45.5,-5],[46.5,-7.5],[47,-8],[47,-9.5],[46.5,-10],[46,-11],[45.5,-11.5],[45,-12],[44.5,-12.5],[43,-12.5],[42.5,-12.5],[41,-12.5],[39,-11.5],[38.5,-11],[37.5,-9.5],[36,-6.5],[35.5,-5.5],[35,-3],[34.5,-0.5],[34,2],[34,3],[34.5,6.5],[35,9],[35.5,11],[35.5,12],[36.5,14],[37,14.5],[38.5,15],[39,15.5],[40,15.5],[41,15.5],[42.5,15],[43,14.5],[44.5,13],[45.5,12],[46.5,10],[47,9],[48.5,6],[50,2.5],[50.5,1]],"data":{"class":[]},"id":"b81604ce55737d2034fd5c76fcf165341","position":[504,229]},{"points":[[0,0],[0.5,-0.5],[1.5,-1],[3,-2.5],[3.5,-4],[4.5,-6],[5,-6.5],[6,-9.5],[7,-11],[8,-13],[8,-14.5],[9,-16.5],[9,-17.5],[9,-20],[9.5,-20.5],[9.5,-22],[9.5,-21],[10,-20],[10,-18.5],[10.5,-16.5],[10.5,-14.5],[10.5,-13.5],[11,-10.5],[11,-9.5],[12,-6.5],[12,-6],[13.5,-3.5],[15,-2.5],[15.5,-2.5],[17,-2.5],[19,-5],[20,-7],[21.5,-8.5],[23,-13],[24,-15],[24.5,-17],[25,-18],[25.5,-20.5],[26,-23.5],[26.5,-23],[26.5,-22.5],[26.5,-20.5],[26.5,-19],[26,-15.5],[26,-14.5],[25.5,-9.5],[25.5,-5.5],[25,-1.5],[25,1],[24.5,8],[24,10.5],[23,17.5],[22.5,21.5],[21.5,25],[21,27],[20,31.5],[19.5,33],[18,36.5],[18,37],[17,38.5],[16.5,38.5],[16,39],[16,38.5],[15,37.5],[15,37],[14.5,33.5],[14.5,32],[15,27],[15,25.5],[16,20.5],[16.5,18.5],[18.5,13],[19,11.5],[21,6.5],[22,5],[24.5,0.5],[25.5,-1],[28,-5],[29,-6.5],[31,-10],[32,-11],[33.5,-14],[34,-15],[35,-16.5],[35.5,-17],[35.5,-16.5],[36,-14.5],[36,-10.5],[36,-9],[36,-6],[36.5,-4.5],[37,-2],[37,-1.5],[38,0.5],[38.5,0.5],[39.5,1],[39.5,1.5],[41,1.5],[41,1],[42.5,0],[43,-0.5],[44.5,-2.5],[45,-3],[46.5,-6],[47.5,-9.5],[48,-10.5],[48,-13],[48,-14],[47.5,-16],[47,-16.5],[46,-18],[45.5,-18.5],[44,-20],[43.5,-20],[42.5,-20.5],[42,-20.5],[41,-20.5],[40.5,-20],[39.5,-19],[39.5,-18.5],[39,-16],[39,-15],[39,-12.5],[39,-8],[40,-4.5],[40,-4],[41,-2.5],[41,-2],[42.5,-1.5],[43.5,-2],[45,-2.5],[45.5,-3],[47.5,-5.5],[49,-7],[50.5,-9],[51,-10],[53,-13],[53.5,-14],[55,-16.5],[55,-17.5],[56,-19],[56,-20],[56.5,-19.5],[56.5,-18],[56.5,-13.5],[56.5,-12.5],[56.5,-8.5],[56.5,-7.5],[57,-4],[57,-3.5],[57.5,-1.5],[58,-1],[58.5,0],[60,0.5],[60.5,0.5],[62,0],[62.5,-0.5],[64,-1.5],[64.5,-2.5],[66,-4.5],[66.5,-5.5],[67.5,-8.5],[67.5,-9],[68.5,-12],[68.5,-13],[69,-15.5],[68.5,-17],[68.5,-18.5],[68.5,-19.5],[68,-20.5],[68,-21],[68,-21.5],[67.5,-20.5],[67.5,-19.5],[67,-17],[67,-16],[67,-12.5],[67.5,-11],[67.5,-7],[68,-6],[68.5,-3],[69,-2.5],[70,-0.5],[70.5,0],[72,1],[73,1.5],[74.5,1.5],[75,1.5],[77,0.5],[78.5,-1.5],[80,-3],[80.5,-4],[83,-8.5]],"data":{"class":[]},"id":"bd0e4b1cd3df6b0e1aac14c8b93feb110","position":[571.5,243]},{"points":[[0,0],[0,-0.5],[0.5,-1.5],[1,-2.5],[2,-4],[2.5,-6],[3.5,-8.5],[4,-11],[4.5,-12.5],[6,-17],[7.5,-24],[8,-25.5],[9,-31],[10,-39.5],[11,-47],[11,-50.5],[11,-53.5],[11,-58],[11,-60],[11,-59.5],[10.5,-56.5],[10.5,-55.5],[10.5,-50],[10,-48],[10,-41],[10,-38.5],[9.5,-30.5],[9.5,-19.5],[9.5,-14.5],[9.5,-10.5],[10,-7],[10.5,-4.5],[10.5,-3.5],[11.5,-1.5],[12.5,-1.5],[13,-1.5],[13.5,-1.5],[15.5,-3],[16,-3.5],[17.5,-6],[18,-7],[19,-10.5],[20,-13],[21,-16],[21,-17.5],[22,-21.5],[22.5,-25.5],[22.5,-26],[23,-27.5],[22.5,-27.5],[22.5,-27],[22.5,-24.5],[22.5,-20],[22.5,-18],[23,-15],[23.5,-11],[24.5,-9],[24.5,-8.5],[25.5,-8],[27.5,-8.5],[29.5,-10],[30,-10.5],[31.5,-12.5],[32,-13.5],[33.5,-16],[34,-18],[35,-20],[35,-21],[35.5,-23.5],[35.5,-24.5],[35,-26.5],[34.5,-27.5],[33,-29],[32.5,-29.5],[30.5,-31],[30,-31.5],[27.5,-32],[27,-32],[25,-31.5],[24.5,-31.5],[23,-30],[21.5,-26.5],[21.5,-25.5],[21,-22.5],[21,-21.5],[21.5,-20],[21.5,-19.5],[22.5,-18.5],[23,-18.5],[24.5,-18.5],[25,-18.5],[27.5,-19.5],[28.5,-20],[31,-21],[32,-21.5],[34.5,-23.5],[35,-24],[37,-25.5],[37.5,-25.5],[39,-27],[39.5,-27],[40.5,-27.5],[41,-27.5],[41.5,-27],[42,-26],[42,-25],[42,-24.5],[42,-21.5],[42,-20.5],[41.5,-17],[41.5,-15.5],[41.5,-11.5],[41.5,-10],[42,-6.5],[42,-5.5],[43,-3],[43.5,-1.5],[44,-1],[44.5,-0.5],[45.5,0],[46,0],[47.5,-0.5],[48,-1],[49.5,-2.5],[50,-3.5],[51.5,-5.5],[52,-6],[53,-9],[54,-11],[54,-12.5],[54.5,-13.5],[54.5,-17],[54.5,-18],[54,-21],[52.5,-24.5],[51.5,-25.5],[50.5,-27],[50,-27],[48.5,-28],[48,-28.5],[46.5,-28.5],[46,-28],[44.5,-27],[44,-26.5],[42.5,-25],[42,-24.5],[41,-22],[40.5,-21],[39.5,-18],[39.5,-17],[39,-14.5],[39,-13.5],[39,-13],[39.5,-12.5],[40,-13.5],[40.5,-13.5],[42,-16]],"data":{"class":[]},"id":"bd91c53b8b01f8829bd5f68e3c07b5767","position":[674.5,252.5]},{"points":[[0,0],[0,-3.5],[0,-5],[0,-6],[0,-7],[-0.5,-6.5],[-1,-5],[-1.5,-3],[-2,-1],[-2.5,0.5],[-3,5.5],[-3,7],[-3.5,13],[-3.5,20],[-3,24.5],[-2.5,26],[-2,28.5],[-1,30],[-1,31],[0.5,33],[1,33.5],[2.5,34.5],[3,35],[4.5,36],[5,36],[6.5,35.5],[7,35.5],[8,34.5],[8.5,34],[10,32.5],[10.5,32],[11.5,29],[13,25.5],[13.5,25],[14,23],[14.5,22.5],[14.5,20.5],[14.5,20],[14.5,19],[15,19.5],[15.5,21],[15.5,21.5],[15.5,24.5],[15.5,27],[16,29.5],[16.5,32],[17,33.5],[17,34.5],[18,36.5],[18.5,36.5],[20,37.5],[20.5,37.5],[21.5,37.5],[23.5,37],[24,37],[25,35.5],[25.5,34.5],[26.5,32.5],[26.5,32],[27.5,29],[28,28],[28.5,25],[28.5,24.5],[28.5,21.5],[28,20.5],[28,17.5],[27.5,16.5],[26.5,15],[26,14.5],[24.5,13.5],[23.5,13],[22,13],[20,13.5],[19.5,14],[19,14],[17,15.5],[17,16.5],[15.5,18],[15.5,19],[15,20.5],[15,21],[15.5,21],[15.5,21.5],[16.5,21.5],[17,21],[18.5,19.5],[19,19],[21,17.5],[21.5,17],[23.5,15.5],[24.5,15],[25.5,14],[26,14],[27,13.5],[27.5,13.5],[28.5,13.5],[28.5,14],[29,15.5],[29.5,16.5],[29.5,19],[29.5,20],[30,23.5],[30,25],[30,29],[30.5,30],[30.5,33],[31,33.5],[31.5,35],[31.5,35.5],[32.5,36],[33.5,36],[34,35.5],[35,34.5],[35.5,34.5],[36.5,33],[37,32],[38,30],[38.5,29],[39.5,26.5],[39.5,25.5],[40.5,23.5],[41,22.5],[41,20.5],[41,20],[41.5,18.5],[41,19],[41,20],[41,22],[40.5,23],[40.5,26],[40.5,27],[41,30],[41,31],[42,33.5],[42.5,34],[43.5,35],[44,35.5],[45,36],[45.5,36],[47,36],[47.5,35.5],[49,35],[49,34.5],[50.5,33.5],[51.5,30.5],[53,27.5],[53,26.5],[54,23.5],[54,22.5],[54.5,19.5],[55,18.5],[55.5,17],[55.5,16.5],[56,15],[56,14.5],[56.5,14.5],[57.5,15.5],[57.5,16],[58,18.5],[58.5,19.5],[58.5,22.5],[58.5,23.5],[59,27.5],[59,29],[58.5,34],[58.5,35.5],[58,40.5],[57.5,42],[57,47],[56.5,48.5],[55.5,53],[55.5,54.5],[54,58],[54,59],[52.5,62],[51.5,62.5],[49.5,65],[48.5,65.5],[46,67.5],[45,67.5],[41.5,68],[40.5,68],[38,67.5],[37.5,67],[35.5,65],[35.5,64.5],[34.5,62],[34,61.5],[34,58.5],[34,58],[34.5,55.5],[35,55],[35.5,53],[36,52.5],[37,50.5],[37.5,49.5],[38.5,48]],"data":{"class":[]},"id":"b3c390523fb347a60916f39e59f434c7d","position":[727,207]}]

  const rootReducer = (state = initialState, action) => {
    // console.log(action.type)
    // console.log(JSON.stringify(state.groupLines))
    switch (action.type) {
      
      //Add line to placeholder
      case 'ADD_LINE_TO_STICKY_GROUP':
        var id = action.data.idGuide;
        var where = action.data.where;
        var data = action.data.data;
        var index = state.stickyLines.indexOf(state.stickyLines.find(x => x.id == id))
        if (index > -1){

          var indexLine = state.stickyLines[index]['placeHolder'].indexOf(state.stickyLines[index]['placeHolder'].find(x => x.id == where))
          if (indexLine > -1){

          // console.log(index, indexLine)
            state = update(state, { 
              stickyLines: {
                [index] : {
                  placeHolder: {
                    [indexLine]: { 
                      lines: {$push: data}
                    }
                  }
                  
                }
              }
            })
          }
        }
        
        return state;


      case 'ADD_SKETCH_LINE':
        // console.log(state.sketchLines)
        return { 
          ...state, 
          sketchLines: [ ...state.sketchLines, action.data] 
        };
        case 'CREATE_STICKY_LINES':
            return { 
              ...state, 
              stickyLines: [ ...state.stickyLines, action.data] 
            };
      case 'CREATE_GROUP_LINES':
        return { 
          ...state, 
          groupLines: [ ...state.groupLines, action.data] 
        };
      
      
        case 'SHOULD_OPEN_MENU':
        if (action.data.shouldOpen == true){
          return { 
            ...state, 
            menuItems: [ ...state.menuItems, action.data] 
          };
        }
        else if (action.data.shouldOpen == false){
          var index = state.menuItems.indexOf(state.menuItems.find(x => x.id == action.data.id))
          if (index > -1){
            state = update(state, { 
              menuItems: {$splice: [[index, 1]]}
            })
          }
          return state;
        }
         
      case 'ADD_LINES_CLASS':
        var idsLine = action.data.idLines;
       
        idsLine.forEach((id)=>{
          var index = state.sketchLines.indexOf(state.sketchLines.find(x => x.id == id))
          if (index > -1){
            // console.log(state.sketchLines[index]['data']['class'])
            state = update(state, { 
              sketchLines: {
                [index] : {
                  data: {
                    class: {$push: action.data.class},
                  }
                }
              }
            })
          }
        })
        return state;


        case 'ADD_LINES_TO_STICKY':
          var id = action.data.id;
          console.log(action.data)
          // 'data': {'linesAttached': this.objectIn}, 
          // idsLine.forEach((id)=>{
            var index = state.stickyLines.indexOf(state.stickyLines.find(x => x.id == id))
            // console.log(index)
            if (index > -1){
              console.log(action.data, state.stickyLines[index])
              // console.log(state.sketchLines[index]['data']['class'])
              state = update(state, { 
                stickyLines: {
                  [index] : {
                    data: {
                      linesAttached: {$push: action.data.idLines},
                    }
                  }
                }
              })
            }
          
          return state;

        
        // console.log(action.data)

      case 'REMOVE_SKETCH_LINES':
          var idsToDelete = action.data;
          idsToDelete.forEach((idToDelete)=>{
            var index = state.sketchLines.indexOf(state.sketchLines.find(x => x.id == idToDelete))
            if (index > -1){
              state = update(state, { 
                sketchLines: {$splice: [[index, 1]]}
              })
            }
          })
          return state;

        
        
      default:
        return state;
    }
  }
    

  export default combineReducers({
    rootReducer : undoable(rootReducer)
  })

  